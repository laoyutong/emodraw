var je=Object.defineProperty,Be=Object.defineProperties;var Je=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var Ke=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var ie=(e,t,r)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))Ke.call(t,r)&&ie(e,r,t[r]);if(Ee)for(var r of Ee(t))Ze.call(t,r)&&ie(e,r,t[r]);return e},ce=(e,t)=>Be(e,Je(t));var Re=(e,t,r)=>(ie(e,typeof t!="symbol"?t+"":t,r),r),le=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var ee=(e,t,r)=>(le(e,t,"read from private field"),r?r.call(e):t.get(e)),de=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ve=(e,t,r,o)=>(le(e,t,"write to private field"),o?o.call(e,r):t.set(e,r),r);var be=(e,t,r)=>(le(e,t,"access private method"),r);import{C as $e,R as qe,a as Qe,D as Ve,F as et,A as tt,m as rt,j as te,c as ue,b as L,r as y,n as fe,d as nt,L as ot,E as st,e as at,f as it,g as ct,h as lt}from"./vendor.8922c5b7.js";const dt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};dt();const Ie={theme:"outline",size:"20",fill:"#333"},he=[{type:"selection",Icon:$e},{type:"rectangle",Icon:qe},{type:"circle",Icon:Qe},{type:"diamond",Icon:Ve},{type:"text",Icon:et},{type:"arrow",Icon:tt}],pe="emodraw",Le="Segoe UI Emoji",re=15,ut="#fff",R={default:"default",crosshair:"crosshair",move:"move",grab:"grab",neswResize:"nesw-resize",nwseResize:"nwse-resize"},ft=30,X=3,H=8,ht=[15,10],Me=20,ne=30,pt="emodraw.png",gt="emodraw",U=(e,t,r,o,n)=>{e.beginPath(),e.moveTo(t,r),e.lineTo(t+o,r),e.lineTo(t+o,r+n),e.lineTo(t,r+n),e.closePath(),e.stroke()},yt=(e,t,r,o,n)=>{e.save(),e.fillStyle="rgba(255,165,0,0.5)",e.fillRect(t,r,o,n),e.restore()},wt=(e,t,r,o,n)=>{const s=o>n?1/o:1/n;e.beginPath(),e.moveTo(t+o,r);for(let a=0;a<Math.PI*2;a+=s)e.lineTo(t+o*Math.cos(a),r+n*Math.sin(a));e.closePath(),e.stroke()},mt=(e,t,r,o,n)=>{e.beginPath(),e.moveTo(t+o/2,r+n),e.lineTo(t+o,r+n/2),e.lineTo(t+o/2,r),e.lineTo(t,r+n/2),e.closePath(),e.stroke()},Dt=(e,t)=>Math.floor(180/(Math.PI/Math.atan(e/t))),ze=30,xt=(e,t,r,o,n)=>{const s=Math.min(Math.pow(o*o+n*n,1/2)/2,ft),a=n<0?-s:s,g=Dt(o,n),u=g+ze,w=g-ze,m=t+o,T=r+n,E=m-a*Math.sin(Math.PI*u/180),x=T-a*Math.cos(Math.PI*u/180),M=m-a*Math.sin(Math.PI*w/180),b=T-a*Math.cos(Math.PI*w/180);e.beginPath(),e.moveTo(t,r),e.lineTo(m,T),e.lineTo(E,x),e.moveTo(m,T),e.lineTo(M,b),e.stroke()},St=(e,t)=>{const{type:r,x:o,y:n,width:s,height:a}=t;switch(r){case"rectangle":U(e,o,n,s,a);return;case"circle":wt(e,o+s/2,n+a/2,Math.abs(s/2),Math.abs(a/2));return;case"arrow":xt(e,o,n,s,a);return;case"diamond":mt(e,o,n,s,a);return;case"selection":yt(e,o,n,s,a);return}},Tt=(e,t)=>{const{content:r,x:o,y:n}=t;e.textBaseline="bottom",e.font=`${re}px  ${Le}`,Pe(r).forEach((s,a)=>{e.fillText(s,o,n+re*(a+1))})},Ae=(e,{x:t,y:r,width:o,height:n,type:s},a)=>{const g=o>0?X:-X,u=n>0?X:-X,w=t-g,m=t+o+g,T=r-u,E=r+n+u;if(e.setLineDash(ht),e.beginPath(),e.moveTo(w,T),e.lineTo(m,T),e.lineTo(m,E),e.lineTo(w,E),e.closePath(),e.stroke(),e.setLineDash([]),!a){const x=o>0?H:-H,M=n>0?H:-H;s!=="text"&&(U(e,w,T,-x,-M),U(e,m,E,x,M),s!=="arrow"&&(U(e,m,T,x,-M),U(e,w,E,-x,M)))}},Et=e=>{const t=i.getSelectionData();if(!t)return;const[r,o,n,s]=t;Ae(e,{x:r,y:n,width:o-r,height:s-n,type:"selection"},!1)},ge=(e,t=i.data)=>{let r=!1;i.data.filter(n=>n.isSelected).length>1&&(Et(e),r=!0),t.forEach(n=>{n.isSelected&&Ae(e,n,r),n.type==="text"?Tt(e,n):St(e,n)})};var W,oe,vt;class Rt{constructor(){de(this,oe);Re(this,"data");de(this,W,void 0);this.data=be(this,oe,vt).call(this),ve(this,W,[])}addOperateStack(t){ee(this,W).push(t)}getSelectionData(){const t=this.data.filter(r=>r.isSelected);if(t.length===1&&t[0].type==="text")return null;if(t.length===1&&t[0].type==="arrow"){const r=t[0];return[r.x,r.x+r.width,r.y,r.y+r.height,!0]}return[...Ce(t),!1]}addDrawData(t){this.data.push(t)}popDrawData(){this.data.pop()}revokeDrawData(){if(ee(this,W).length>0){const t=ee(this,W).pop();if(t.type==="DELETE"&&this.data.push(...t.payload),t.type==="ADD"&&(this.data=this.data.filter(r=>t.selectedIds!==r.id)),t.type==="MOVE"){const{x:r,y:o}=t.payload;this.data.forEach(n=>n.isSelected=!1),this.data.filter(n=>t.selectedIds.includes(n.id)).forEach(n=>{n.x-=r,n.y-=o,n.isSelected=!0})}if(t.type==="RESIZE"){const r=t.payload,o=r.map(n=>n.id);this.data=this.data.filter(n=>!o.includes(n.id)).concat(r)}t.type==="SET"&&(this.data=t.payload),this.storageDrawData()}}storageDrawData(){this.data=this.data.filter(t=>t.type!=="selection").map(t=>{if(t.type==="arrow")return t;const r=F({},t);return r.width<0&&(r.x=r.x+r.width,r.width=-r.width),r.height<0&&(r.y=r.y+r.height,r.height=-r.height),r}),localStorage.setItem(pe,JSON.stringify(this.data))}delete(){const t=[];this.data=this.data.filter(r=>r.isSelected?(t.push(ce(F({},r),{isSelected:!1})),!1):!0),this.addOperateStack({type:"DELETE",payload:t}),this.storageDrawData()}}W=new WeakMap,oe=new WeakSet,vt=function(){let t;try{t=JSON.parse(localStorage.getItem(pe))||[]}catch{t=[],localStorage.setItem(pe,"[]")}return t};var i=new Rt;const bt=({x:e,y:t},r,o)=>{if(document.querySelector("textarea"))return;const s=document.createElement("textarea");Object.assign(s.style,{position:"absolute",margin:0,padding:0,border:0,outline:0,background:"transparent",resize:"none",top:t+"px",left:e+"px",fontSize:re+"px",lineHeight:"1em",fontFamily:Le,width:`${window.innerWidth-e}px`,whiteSpace:"nowrap",overflowX:"hidden"}),o&&(s.value=o,s.setSelectionRange(0,o.length)),s.onkeydown=a=>{a.stopPropagation()},s.oninput=()=>{s.style.height=s.scrollHeight+"px"},s.onblur=a=>{r(a.target.value),document.body.removeChild(s)},document.body.appendChild(s),setTimeout(()=>{s.focus()})},z=5,It=e=>e>z?e-z:0,j=e=>e+z<window.innerWidth?e+z:window.innerWidth,B=e=>e+z<window.innerWidth?e+z:window.innerWidth,P=(e,t,r)=>e>=It(t)&&e<=r,ye=(e,t,r,o)=>Math.pow(Math.pow(Math.abs(e-t),2)+Math.pow(Math.abs(r-o),2),1/2),we=({x:e,y:t})=>{for(let r=0;r<i.data.length;r++){const o=i.data[r],n=o.x,s=o.x+o.width,a=o.y,g=o.y+o.height;if(o.isSelected){const u=o.width>0?s:n,w=o.width>0?n:s,m=o.height>0?g:a,T=o.height>0?a:g;if(e>=w&&e<=u&&t>=T&&t<=m)return o.id}if(o.type==="text"&&P(e,n,j(s))&&P(t,a,B(g))||o.type==="rectangle"&&((P(e,n,j(n))||P(e,s,j(s)))&&P(t,a,B(g))||(P(t,a,B(a))||P(t,g,B(g)))&&P(e,n,j(s))))return o.id;if(o.type==="diamond"){const u=o.width*o.height,w=Math.abs(e-(n+o.width/2)),m=Math.abs(t-(a+o.height/2)),T=((w+z)*o.height+(m+z)*o.width)*2,E=((w-z)*o.height+(m-z)*o.width)*2;if(T>=u&&E<=u)return o.id}if(o.type==="circle"){const u=n+o.width/2,w=a+o.height/2,m=Math.abs(o.width/2),T=Math.abs(o.height/2),E=m>T?1/m:1/T;for(let x=0;x<Math.PI*2;x+=E){const M=Math.round(u+m*Math.cos(x)),b=Math.round(w+T*Math.sin(x));if(P(e,M,j(M))&&P(t,b,B(b)))return o.id}}if(o.type==="arrow"){const u=Math.round(ye(n,s,a,g)),w=Math.round(ye(e,n,t,a)+ye(e,s,t,g));if(w>=u-z/2&&w<=u+z/2)return o.id}}return null},Lt=(e,t,r,o)=>{const[n,s]=r>0?[e+r,e]:[e,e+r],[a,g]=o>0?[t+o,t]:[t,t+o];return i.data.filter(u=>{if(u.type==="selection")return!1;const[w,m]=u.width>0?[u.x+u.width,u.x]:[u.x,u.x+u.width],[T,E]=u.height>0?[u.y+u.height,u.y]:[u.y,u.y+u.height];return n>=w&&s<=m&&a>=T&&g<=E}).map(({id:u})=>u)},_e=(e,t)=>{const r=i.getSelectionData();if(!r)return!1;const[o,n,s,a]=r;return e<=o&&e>=n&&t<=s&&t>=a},S=(e,t,r)=>r?e>=t+X&&e<=t+H+X:e<=t-X&&e>=t-H-X,Oe=({x:e,y:t})=>{const r=i.getSelectionData();if(!r)return null;const[o,n,s,a,g]=r;if(g){if(o>=n&&s>a){if(S(e,n,!1)&&S(t,a,!1))return[R.nwseResize,"top"];if(S(e,o,!0)&&S(t,s,!0))return[R.nwseResize,"bottom"]}else if(o>=n&&s<a){if(S(e,n,!1)&&S(t,a,!0))return[R.neswResize,"bottom"];if(S(e,o,!0)&&S(t,s,!1))return[R.neswResize,"top"]}else if(o<n&&s>a){if(S(e,n,!0)&&S(t,a,!1))return[R.neswResize,"top"];if(S(e,o,!1)&&S(t,s,!0))return[R.neswResize,"bottom"]}else{if(S(e,o,!1)&&S(t,s,!1))return[R.nwseResize,"top"];if(S(e,n,!0)&&S(t,a,!0))return[R.nwseResize,"bottom"]}return null}return S(e,n,!1)&&S(t,a,!1)?[R.nwseResize,"top"]:S(e,o,!0)&&S(t,s,!0)?[R.nwseResize,"bottom"]:S(e,n,!1)&&S(t,s,!0)?[R.neswResize,"bottom"]:S(e,o,!0)&&S(t,a,!1)?[R.neswResize,"top"]:null},Mt=({x:e,y:t})=>{const r=i.data.filter(o=>o.type==="text");for(let o=0;o<r.length;o++){const n=r[o];if(e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height)return n}return null},Ce=e=>{let t=-1/0,r=-1/0,o=1/0,n=1/0;return e.forEach(s=>{const[a,g]=s.width>0?[s.x+s.width,s.x]:[s.x,s.x+s.width],[u,w]=s.height>0?[s.y+s.height,s.y]:[s.y,s.y+s.height];a>t&&(t=a),u>r&&(r=u),g<o&&(o=g),w<n&&(n=w)}),[t,o,r,n]},Pe=e=>e.replace(/\r\n?/g,`
`).split(`
`).filter(t=>!!t.trim()),zt=e=>{const t="\uFEFF",r=new Blob([t+e],{type:"text/json"});return URL.createObjectURL(r)},Ne=(e,t)=>{const r=document.createElement("a");r.download=t,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)};var A=rt();const At="_container_1dwzc_1",_t="_element_1dwzc_10",Ot="_operate_1dwzc_14",Ct="_active_1dwzc_30";var Y={container:At,element:_t,operate:Ot,"tool-item":"_tool-item_1dwzc_17",active:Ct,"tool-index":"_tool-index_1dwzc_33"};const Pt=({Icon:e,index:t,changeType:r,isActive:o})=>te("div",{className:ue(Y["tool-item"],{[Y.active]:o}),onClick:r,children:[L("div",{children:e}),L("div",{className:Y["tool-index"],children:t})]}),Nt=(e,t)=>{y.exports.useEffect(()=>{const r=()=>{!e.current||!t.current||(e.current.width=window.innerWidth,e.current.height=window.innerHeight,ge(t.current))};return r(),window.addEventListener("resize",r),()=>document.removeEventListener("resize",r)},[])},ke=e=>{y.exports.useEffect(()=>{const t=r=>{const{key:o,metaKey:n}=r;e(o,n)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[])},me=y.exports.createContext({}),kt=({children:e})=>{const[t,r]=y.exports.useState("selection");return L(me.Provider,{value:{drawType:t,setDrawType:r},children:e})},De=y.exports.createContext({}),Xt=({children:e})=>{const[t,r]=y.exports.useState(R.default);return L(De.Provider,{value:{cursorType:t,setCursorType:r},children:e})},Yt=(e,t)=>{const{drawType:r,setDrawType:o}=y.exports.useContext(me),{cursorType:n,setCursorType:s}=y.exports.useContext(De),a=y.exports.useRef(!1),g=y.exports.useRef(!1),u=y.exports.useRef(!1),w=y.exports.useRef(!1),m=y.exports.useRef(),T=y.exports.useRef(),E=y.exports.useRef(),x=y.exports.useRef({x:0,y:0}),M=y.exports.useRef({x:0,y:0}),b=y.exports.useRef({x:0,y:0}),se=y.exports.useRef([]),_=()=>{e.current&&(e.current.clearRect(0,0,window.innerWidth,window.innerHeight),ge(e.current))};y.exports.useEffect(()=>{const c=()=>{i.addOperateStack({type:"DELETE",payload:i.data}),i.data=[],i.storageDrawData(),_()},d=()=>{if(i.data.length===0)return;const h=document.createElement("canvas"),[p,D,v,I]=Ce(i.data),k=p-D+ne,N=v-I+ne;h.width=k,h.height=N;const O=h.getContext("2d");O.save(),O.fillStyle=ut,O.fillRect(0,0,k,N),O.restore(),ge(O,i.data.map(G=>ce(F({},G),{x:G.x-D+ne/2,y:G.y-I+ne/2})));const q=h.toDataURL();Ne(q,pt)},l=()=>{if(i.data.length===0)return;const h=zt(JSON.stringify(i.data));Ne(h,gt)},f=()=>{const h=document.createElement("input");h.type="file",document.body.appendChild(h),h.click(),h.onchange=p=>{const v=p.target.files[0],I=new FileReader;I.onload=k=>{try{const N=JSON.parse(k.target.result);i.addOperateStack({type:"SET",payload:i.data}),i.data=N,i.storageDrawData(),_()}catch{}},I.readAsText(v),document.body.removeChild(h)}};return A.on("exportImage",d),A.on("exportData",l),A.on("clear",c),A.on("import",f),()=>{A.off("import",f),A.off("exportData",l),A.off("exportImage",d),A.off("clear",c)}},[]);const Xe=(c,d,l)=>{c.type==="arrow"?T.current==="head"?(c.width+=d,c.height+=l):(c.x+=d,c.y+=l,c.width-=d,c.height-=l):n==="nesw-resize"?m.current==="top"?(c.y+=l,c.width+=d,c.height-=l):(c.height+=l,c.x+=d,c.width-=d):n==="nwse-resize"&&(m.current==="top"?(c.x+=d,c.y+=l,c.width-=d,c.height-=l):(c.width+=d,c.height+=l))},Ye=(c,d,l)=>{const{x:f,y:h}=M.current,p={x:0,y:0},D=d-f,v=l-h,I=i.getSelectionData(),k=I[0]-I[1],N=I[2]-I[3],O=m.current==="top",q=O&&n==="nesw-resize"||m.current==="bottom"&&n==="nwse-resize",G=m.current==="bottom"&&n==="nesw-resize"||O&&n==="nwse-resize";if(k<=Me&&(D<=b.current.x&&q||D>=b.current.x&&G)||N<=Me&&(v<=b.current.y&&m.current==="bottom"||v>=b.current.y&&O))return;let Q=0,V=0;const xe=Math.abs(D)>Math.abs(v);Q=xe?n==="nesw-resize"?-v:v:D,V=xe?v:n==="nesw-resize"?-D:D,p.x=I[q?1:0],p.y=I[O?2:3],c.forEach(C=>{const Se=Math.abs(C.x-p.x)/k,Ge=Math.abs(C.x+C.width-p.x)/k,Te=Math.abs(C.y-p.y)/N,Ue=Math.abs(C.y+C.height-p.y)/N;C.x+=(Q-b.current.x)*Se,C.y+=(V-b.current.y)*Te,C.width+=(Q-b.current.x)*(Ge-Se),C.height+=(V-b.current.y)*(Ue-Te)}),b.current={x:Q,y:V}},Fe=(c,d,l)=>{c.length===1?Xe(c[0],d-x.current.x,l-x.current.y):Ye(c,d,l)},We=(c,d,l)=>{c.forEach(f=>{f.x+=d,f.y+=l})},ae=({x:c,y:d},l)=>{bt({x:c,y:d},f=>{if(f.trim()){const h=Pe(f);let p=0;h.forEach(v=>{if(e.current){const{width:I}=e.current.measureText(v);I>p&&(p=I)}});const D=fe();i.addDrawData({type:"text",id:D,x:c,y:d,content:f,width:Math.floor(p),height:h.length*re,isSelected:!1}),i.addOperateStack({type:"ADD",selectedIds:D}),i.storageDrawData(),_()}},l)},J=y.exports.useRef();J.current=(c,d)=>{if(r==="selection"){const l=Mt({x:c,y:d});i.data.forEach(f=>f.isSelected=!1),l?(i.data=i.data.filter(f=>f.id!==l.id),ae({x:l.x,y:l.y},l.content)):ae({x:c,y:d}),_()}},y.exports.useEffect(()=>{const c=({pageX:d,pageY:l})=>{var f;(f=J.current)==null||f.call(J,d,l)};return document.addEventListener("dblclick",c),()=>document.removeEventListener("dblclick",c)},[]),y.exports.useEffect(()=>{s(r==="selection"?R.default:R.crosshair),r!=="selection"&&i.data.forEach(c=>c.isSelected=!1)},[r]),ke((c,d)=>{d&&c==="z"&&(i.revokeDrawData(),_()),d&&c==="a"&&(i.data.forEach(l=>l.isSelected=!0),i.data.length>1&&(w.current=!0),i.storageDrawData(),_()),c==="Backspace"&&(i.delete(),_())});const He=()=>{E.current=void 0,u.current=!1,b.current={x:0,y:0},se.current=[]},K=y.exports.useRef();K.current=c=>{if(c.button===2)return;const{pageX:d,pageY:l}=c;if(x.current=M.current={x:d,y:l},r==="text")o("selection"),ae({x:d,y:l});else if(r==="selection"){if(a.current=!0,w.current&&_e(d,l)){g.current=!0;return}const f=Oe({x:d,y:l});if(f){m.current=f[1],g.current=!0;const p=i.data.filter(D=>D.isSelected);if(se.current=p.map(D=>F({},D)),p.length===1&&p[0].type==="arrow"){const D=p[0];T.current=D.height<=0&&m.current==="top"||D.height>0&&m.current==="bottom"?"head":"foot"}return}const h=we({x:d,y:l});i.data.forEach(p=>p.isSelected=!1),g.current=!1,h?(i.data.find(p=>p.id===h).isSelected=!0,g.current=!0,i.storageDrawData()):(i.addDrawData({type:r,id:fe(),x:d,y:l,width:0,height:0,isSelected:!1}),_())}else a.current=!0,i.addDrawData({type:r,id:fe(),x:d,y:l,width:0,height:0,isSelected:!1})};const Z=y.exports.useRef();Z.current=c=>{const{pageX:d,pageY:l}=c;if(!a.current){const p=Oe({x:d,y:l});if(p){s(p[0]);return}if(r==="selection"){const D=w.current?_e(d,l):we({x:d,y:l});s(D?R.move:R.default)}return}const f=d-x.current.x,h=l-x.current.y;if(r==="selection"&&g.current){const p=i.data.filter(v=>v.isSelected),D=["nesw-resize","nwse-resize"].includes(n);D?Fe(p,d,l):We(p,f,h),(d!==x.current.x||l!==x.current.y)&&(E.current=D?"resize":"move",x.current={x:d,y:l})}else{const p=i.data[i.data.length-1];if(p.type!=="text"&&(p.width=f,p.height=h),p.type==="selection"){u.current=!0;const D=Lt(x.current.x,x.current.y,f,h);w.current=D.length>1,i.data.forEach(v=>{v.isSelected=D.includes(v.id)})}}_()};const $=y.exports.useRef();$.current=c=>{if(!a.current)return;a.current=!1;const{pageX:d,pageY:l}=c;if(d===x.current.x&&l===x.current.y)r!=="selection"&&i.popDrawData(),E.current?E.current==="move"?i.addOperateStack({type:"MOVE",selectedIds:i.data.filter(f=>f.isSelected).map(f=>f.id),payload:{x:d-M.current.x,y:l-M.current.y}}):i.addOperateStack({type:"RESIZE",payload:se.current}):w.current=!1;else{if(r!=="selection"){const f=i.data[i.data.length-1];f.isSelected=!0,i.addOperateStack({type:"ADD",selectedIds:f.id}),o("selection")}else i.popDrawData();_()}if(r==="selection"&&!E.current&&!u.current){i.data.forEach(h=>h.isSelected=!1);const f=we({x:d,y:l});f?i.data.find(h=>h.id===f).isSelected=!0:s(R.default),_()}He(),i.storageDrawData()},y.exports.useEffect(()=>{const c=f=>{var h;(h=Z.current)==null||h.call(Z,f)},d=f=>{var h;(h=K.current)==null||h.call(K,f)},l=f=>{var h;(h=$.current)==null||h.call($,f)};return document.addEventListener("mousedown",d),document.addEventListener("mousemove",c),document.addEventListener("mouseup",l),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",l)}},[])},Ft=()=>{const{drawType:e,setDrawType:t}=y.exports.useContext(me);ke(g=>{const u=+g-1;!isNaN(u)&&u!==-1&&u<he.length&&t(he[u].type)});const r=(g,u)=>L("div",{className:Y["tool-item"],onClick:u,children:L(g,F({},Ie))}),o=()=>{A.emit("clear")},n=()=>{A.emit("import")},s=()=>{A.emit("exportData")},a=()=>{A.emit("exportImage")};return te(nt,{children:[L("div",{className:ue(Y.container,Y.element),children:he.map(({Icon:g,type:u},w)=>L(Pt,{isActive:u===e,Icon:L(g,F({},Ie)),index:w+1,changeType:()=>t(u)},w))}),te("div",{className:ue(Y.container,Y.operate),children:[r(it,o),r(ot,n),r(st,s),r(at,a)]})]})};function Wt(){const e=y.exports.useRef(null),t=y.exports.useRef(null),{cursorType:r}=y.exports.useContext(De);return y.exports.useEffect(()=>{e.current&&(t.current=e.current.getContext("2d"))},[]),Yt(t),Nt(e,t),te("div",{className:"App",style:{position:"relative",cursor:r},children:[L(Ft,{}),L("canvas",{ref:e,id:"canvas"})]})}ct.render(L(lt.StrictMode,{children:L(kt,{children:L(Xt,{children:L(Wt,{})})})}),document.getElementById("root"));
