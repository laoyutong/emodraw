var je=Object.defineProperty,Be=Object.defineProperties;var Je=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var Ke=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var ie=(e,t,r)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))Ke.call(t,r)&&ie(e,r,t[r]);if(Re)for(var r of Re(t))Ze.call(t,r)&&ie(e,r,t[r]);return e},ce=(e,t)=>Be(e,Je(t));var Ee=(e,t,r)=>(ie(e,typeof t!="symbol"?t+"":t,r),r),le=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var ee=(e,t,r)=>(le(e,t,"read from private field"),r?r.call(e):t.get(e)),ue=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ve=(e,t,r,o)=>(le(e,t,"write to private field"),o?o.call(e,r):t.set(e,r),r);var be=(e,t,r)=>(le(e,t,"access private method"),r);import{C as $e,R as qe,a as Qe,D as Ve,F as et,A as tt,m as rt,j as te,c as de,b as M,r as w,n as fe,d as nt,L as ot,E as st,e as at,f as it,g as ct,h as lt}from"./vendor.8922c5b7.js";const ut=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};ut();const Ie={theme:"outline",size:"20",fill:"#333"},he=[{type:"selection",Icon:$e},{type:"rectangle",Icon:qe},{type:"circle",Icon:Qe},{type:"diamond",Icon:Ve},{type:"text",Icon:et},{type:"arrow",Icon:tt}],pe="emodraw",Me="Segoe UI Emoji",re=15,dt="#fff",E={default:"default",crosshair:"crosshair",move:"move",grab:"grab",neswResize:"nesw-resize",nwseResize:"nwse-resize"},ft=30,X=3,H=8,ht=[15,10],Le=20,ne=30,pt="emodraw.png",gt="emodraw",U=(e,t,r,o,n)=>{e.beginPath(),e.moveTo(t,r),e.lineTo(t+o,r),e.lineTo(t+o,r+n),e.lineTo(t,r+n),e.closePath(),e.stroke()},wt=(e,t,r,o,n)=>{e.save(),e.fillStyle="rgba(255,165,0,0.5)",e.fillRect(t,r,o,n),e.restore()},yt=(e,t,r,o,n)=>{const s=o>n?1/o:1/n;e.beginPath(),e.moveTo(t+o,r);for(let a=0;a<Math.PI*2;a+=s)e.lineTo(t+o*Math.cos(a),r+n*Math.sin(a));e.closePath(),e.stroke()},mt=(e,t,r,o,n)=>{e.beginPath(),e.moveTo(t+o/2,r+n),e.lineTo(t+o,r+n/2),e.lineTo(t+o/2,r),e.lineTo(t,r+n/2),e.closePath(),e.stroke()},Dt=(e,t)=>Math.floor(180/(Math.PI/Math.atan(e/t))),ze=30,xt=(e,t,r,o,n)=>{const s=Math.min(Math.pow(o*o+n*n,1/2)/2,ft),a=n<0?-s:s,g=Dt(o,n),d=g+ze,y=g-ze,m=t+o,T=r+n,R=m-a*Math.sin(Math.PI*d/180),x=T-a*Math.cos(Math.PI*d/180),L=m-a*Math.sin(Math.PI*y/180),b=T-a*Math.cos(Math.PI*y/180);e.beginPath(),e.moveTo(t,r),e.lineTo(m,T),e.lineTo(R,x),e.moveTo(m,T),e.lineTo(L,b),e.stroke()},St=(e,t)=>{const{type:r,x:o,y:n,width:s,height:a}=t;switch(r){case"rectangle":U(e,o,n,s,a);return;case"circle":yt(e,o+s/2,n+a/2,Math.abs(s/2),Math.abs(a/2));return;case"arrow":xt(e,o,n,s,a);return;case"diamond":mt(e,o,n,s,a);return;case"selection":wt(e,o,n,s,a);return}},Tt=(e,t)=>{const{content:r,x:o,y:n}=t;e.textBaseline="bottom",e.font=`${re}px  ${Me}`,Pe(r).forEach((s,a)=>{e.fillText(s,o,n+re*(a+1))})},Ae=(e,{x:t,y:r,width:o,height:n,type:s},a)=>{const g=o>0?X:-X,d=n>0?X:-X,y=t-g,m=t+o+g,T=r-d,R=r+n+d;if(e.setLineDash(ht),e.beginPath(),e.moveTo(y,T),e.lineTo(m,T),e.lineTo(m,R),e.lineTo(y,R),e.closePath(),e.stroke(),e.setLineDash([]),!a){const x=o>0?H:-H,L=n>0?H:-H;s!=="text"&&(U(e,y,T,-x,-L),U(e,m,R,x,L),s!=="arrow"&&(U(e,m,T,x,-L),U(e,y,R,-x,L)))}},Rt=e=>{const t=u.getSelectionData();if(!t)return;const[r,o,n,s]=t;Ae(e,{x:r,y:n,width:o-r,height:s-n,type:"selection"},!1)},ge=(e,t=u.data)=>{let r=!1;u.data.filter(n=>n.isSelected).length>1&&(Rt(e),r=!0),t.forEach(n=>{n.isSelected&&Ae(e,n,r),n.type==="text"?Tt(e,n):St(e,n)})};var W,oe,vt;class Et{constructor(){ue(this,oe);Ee(this,"data");ue(this,W,void 0);this.data=be(this,oe,vt).call(this),ve(this,W,[])}addOperateStack(t){ee(this,W).push(t)}getSelectionData(){const t=this.data.filter(r=>r.isSelected);if(t.length===1&&t[0].type==="text")return null;if(t.length===1&&t[0].type==="arrow"){const r=t[0];return[r.x,r.x+r.width,r.y,r.y+r.height,!0]}return[...Ce(t),!1]}addDrawData(t){this.data.push(t)}popDrawData(){this.data.pop()}revokeDrawData(){if(ee(this,W).length>0){const t=ee(this,W).pop();if(t.type==="DELETE"&&this.data.push(...t.payload),t.type==="ADD"&&(this.data=this.data.filter(r=>t.selectedIds!==r.id)),t.type==="MOVE"){const{x:r,y:o}=t.payload;this.data.forEach(n=>n.isSelected=!1),this.data.filter(n=>t.selectedIds.includes(n.id)).forEach(n=>{n.x-=r,n.y-=o,n.isSelected=!0})}if(t.type==="RESIZE"){const r=t.payload,o=r.map(n=>n.id);this.data=this.data.filter(n=>!o.includes(n.id)).concat(r)}this.storageDrawData()}}storageDrawData(){this.data=this.data.filter(t=>t.type!=="selection").map(t=>{if(t.type==="arrow")return t;const r=F({},t);return r.width<0&&(r.x=r.x+r.width,r.width=-r.width),r.height<0&&(r.y=r.y+r.height,r.height=-r.height),r}),localStorage.setItem(pe,JSON.stringify(this.data))}delete(){const t=[];this.data=this.data.filter(r=>r.isSelected?(t.push(ce(F({},r),{isSelected:!1})),!1):!0),this.addOperateStack({type:"DELETE",payload:t}),this.storageDrawData()}}W=new WeakMap,oe=new WeakSet,vt=function(){let t;try{t=JSON.parse(localStorage.getItem(pe))||[]}catch{t=[],localStorage.setItem(pe,"[]")}return t};var u=new Et;const bt=({x:e,y:t},r,o)=>{if(document.querySelector("textarea"))return;const s=document.createElement("textarea");Object.assign(s.style,{position:"absolute",margin:0,padding:0,border:0,outline:0,background:"transparent",resize:"none",top:t+"px",left:e+"px",fontSize:re+"px",lineHeight:"1em",fontFamily:Me,width:`${window.innerWidth-e}px`,whiteSpace:"nowrap",overflowX:"hidden"}),o&&(s.value=o,s.setSelectionRange(0,o.length)),s.onkeydown=a=>{a.stopPropagation()},s.oninput=()=>{s.style.height=s.scrollHeight+"px"},s.onblur=a=>{r(a.target.value),document.body.removeChild(s)},document.body.appendChild(s),setTimeout(()=>{s.focus()})},z=5,It=e=>e>z?e-z:0,j=e=>e+z<window.innerWidth?e+z:window.innerWidth,B=e=>e+z<window.innerWidth?e+z:window.innerWidth,P=(e,t,r)=>e>=It(t)&&e<=r,we=(e,t,r,o)=>Math.pow(Math.pow(Math.abs(e-t),2)+Math.pow(Math.abs(r-o),2),1/2),ye=({x:e,y:t})=>{for(let r=0;r<u.data.length;r++){const o=u.data[r],n=o.x,s=o.x+o.width,a=o.y,g=o.y+o.height;if(o.isSelected){const d=o.width>0?s:n,y=o.width>0?n:s,m=o.height>0?g:a,T=o.height>0?a:g;if(e>=y&&e<=d&&t>=T&&t<=m)return o.id}if(o.type==="text"&&P(e,n,j(s))&&P(t,a,B(g))||o.type==="rectangle"&&((P(e,n,j(n))||P(e,s,j(s)))&&P(t,a,B(g))||(P(t,a,B(a))||P(t,g,B(g)))&&P(e,n,j(s))))return o.id;if(o.type==="diamond"){const d=o.width*o.height,y=Math.abs(e-(n+o.width/2)),m=Math.abs(t-(a+o.height/2)),T=((y+z)*o.height+(m+z)*o.width)*2,R=((y-z)*o.height+(m-z)*o.width)*2;if(T>=d&&R<=d)return o.id}if(o.type==="circle"){const d=n+o.width/2,y=a+o.height/2,m=Math.abs(o.width/2),T=Math.abs(o.height/2),R=m>T?1/m:1/T;for(let x=0;x<Math.PI*2;x+=R){const L=Math.round(d+m*Math.cos(x)),b=Math.round(y+T*Math.sin(x));if(P(e,L,j(L))&&P(t,b,B(b)))return o.id}}if(o.type==="arrow"){const d=Math.round(we(n,s,a,g)),y=Math.round(we(e,n,t,a)+we(e,s,t,g));if(y>=d-z/2&&y<=d+z/2)return o.id}}return null},Mt=(e,t,r,o)=>{const[n,s]=r>0?[e+r,e]:[e,e+r],[a,g]=o>0?[t+o,t]:[t,t+o];return u.data.filter(d=>{if(d.type==="selection")return!1;const[y,m]=d.width>0?[d.x+d.width,d.x]:[d.x,d.x+d.width],[T,R]=d.height>0?[d.y+d.height,d.y]:[d.y,d.y+d.height];return n>=y&&s<=m&&a>=T&&g<=R}).map(({id:d})=>d)},_e=(e,t)=>{const r=u.getSelectionData();if(!r)return!1;const[o,n,s,a]=r;return e<=o&&e>=n&&t<=s&&t>=a},S=(e,t,r)=>r?e>=t+X&&e<=t+H+X:e<=t-X&&e>=t-H-X,Oe=({x:e,y:t})=>{const r=u.getSelectionData();if(!r)return null;const[o,n,s,a,g]=r;if(g){if(o>=n&&s>a){if(S(e,n,!1)&&S(t,a,!1))return[E.nwseResize,"top"];if(S(e,o,!0)&&S(t,s,!0))return[E.nwseResize,"bottom"]}else if(o>=n&&s<a){if(S(e,n,!1)&&S(t,a,!0))return[E.neswResize,"bottom"];if(S(e,o,!0)&&S(t,s,!1))return[E.neswResize,"top"]}else if(o<n&&s>a){if(S(e,n,!0)&&S(t,a,!1))return[E.neswResize,"top"];if(S(e,o,!1)&&S(t,s,!0))return[E.neswResize,"bottom"]}else{if(S(e,o,!1)&&S(t,s,!1))return[E.nwseResize,"top"];if(S(e,n,!0)&&S(t,a,!0))return[E.nwseResize,"bottom"]}return null}return S(e,n,!1)&&S(t,a,!1)?[E.nwseResize,"top"]:S(e,o,!0)&&S(t,s,!0)?[E.nwseResize,"bottom"]:S(e,n,!1)&&S(t,s,!0)?[E.neswResize,"bottom"]:S(e,o,!0)&&S(t,a,!1)?[E.neswResize,"top"]:null},Lt=({x:e,y:t})=>{const r=u.data.filter(o=>o.type==="text");for(let o=0;o<r.length;o++){const n=r[o];if(e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height)return n}return null},Ce=e=>{let t=-1/0,r=-1/0,o=1/0,n=1/0;return e.forEach(s=>{const[a,g]=s.width>0?[s.x+s.width,s.x]:[s.x,s.x+s.width],[d,y]=s.height>0?[s.y+s.height,s.y]:[s.y,s.y+s.height];a>t&&(t=a),d>r&&(r=d),g<o&&(o=g),y<n&&(n=y)}),[t,o,r,n]},Pe=e=>e.replace(/\r\n?/g,`
`).split(`
`).filter(t=>!!t.trim()),zt=e=>{const t="\uFEFF",r=new Blob([t+e],{type:"text/json"});return URL.createObjectURL(r)},Ne=(e,t)=>{const r=document.createElement("a");r.download=t,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)};var A=rt();const At="_container_1dwzc_1",_t="_element_1dwzc_10",Ot="_operate_1dwzc_14",Ct="_active_1dwzc_30";var Y={container:At,element:_t,operate:Ot,"tool-item":"_tool-item_1dwzc_17",active:Ct,"tool-index":"_tool-index_1dwzc_33"};const Pt=({Icon:e,index:t,changeType:r,isActive:o})=>te("div",{className:de(Y["tool-item"],{[Y.active]:o}),onClick:r,children:[M("div",{children:e}),M("div",{className:Y["tool-index"],children:t})]}),Nt=(e,t)=>{w.exports.useEffect(()=>{const r=()=>{!e.current||!t.current||(e.current.width=window.innerWidth,e.current.height=window.innerHeight,ge(t.current))};return r(),window.addEventListener("resize",r),()=>document.removeEventListener("resize",r)},[])},ke=e=>{w.exports.useEffect(()=>{const t=r=>{const{key:o,metaKey:n}=r;e(o,n)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[])},me=w.exports.createContext({}),kt=({children:e})=>{const[t,r]=w.exports.useState("selection");return M(me.Provider,{value:{drawType:t,setDrawType:r},children:e})},De=w.exports.createContext({}),Xt=({children:e})=>{const[t,r]=w.exports.useState(E.default);return M(De.Provider,{value:{cursorType:t,setCursorType:r},children:e})},Yt=(e,t)=>{const{drawType:r,setDrawType:o}=w.exports.useContext(me),{cursorType:n,setCursorType:s}=w.exports.useContext(De),a=w.exports.useRef(!1),g=w.exports.useRef(!1),d=w.exports.useRef(!1),y=w.exports.useRef(!1),m=w.exports.useRef(),T=w.exports.useRef(),R=w.exports.useRef(),x=w.exports.useRef({x:0,y:0}),L=w.exports.useRef({x:0,y:0}),b=w.exports.useRef({x:0,y:0}),se=w.exports.useRef([]),_=()=>{e.current&&(e.current.clearRect(0,0,window.innerWidth,window.innerHeight),ge(e.current))};w.exports.useEffect(()=>{const i=()=>{u.data=[],u.storageDrawData(),_()},l=()=>{if(u.data.length===0)return;const h=document.createElement("canvas"),[p,D,v,I]=Ce(u.data),k=p-D+ne,N=v-I+ne;h.width=k,h.height=N;const O=h.getContext("2d");O.save(),O.fillStyle=dt,O.fillRect(0,0,k,N),O.restore(),ge(O,u.data.map(G=>ce(F({},G),{x:G.x-D+ne/2,y:G.y-I+ne/2})));const q=h.toDataURL();Ne(q,pt)},c=()=>{if(u.data.length===0)return;const h=zt(JSON.stringify(u.data));Ne(h,gt)},f=()=>{const h=document.createElement("input");h.type="file",document.body.appendChild(h),h.click(),h.onchange=p=>{const v=p.target.files[0],I=new FileReader;I.onload=k=>{try{const N=JSON.parse(k.target.result);u.data=N,u.revokeDrawData(),_()}catch{}},I.readAsText(v),document.body.removeChild(h)}};return A.on("exportImage",l),A.on("exportData",c),A.on("clear",i),A.on("import",f),()=>{A.off("import",f),A.off("exportData",c),A.off("exportImage",l),A.off("clear",i)}},[]);const Xe=(i,l,c)=>{i.type==="arrow"?T.current==="head"?(i.width+=l,i.height+=c):(i.x+=l,i.y+=c,i.width-=l,i.height-=c):n==="nesw-resize"?m.current==="top"?(i.y+=c,i.width+=l,i.height-=c):(i.height+=c,i.x+=l,i.width-=l):n==="nwse-resize"&&(m.current==="top"?(i.x+=l,i.y+=c,i.width-=l,i.height-=c):(i.width+=l,i.height+=c))},Ye=(i,l,c)=>{const{x:f,y:h}=L.current,p={x:0,y:0},D=l-f,v=c-h,I=u.getSelectionData(),k=I[0]-I[1],N=I[2]-I[3],O=m.current==="top",q=O&&n==="nesw-resize"||m.current==="bottom"&&n==="nwse-resize",G=m.current==="bottom"&&n==="nesw-resize"||O&&n==="nwse-resize";if(k<=Le&&(D<=b.current.x&&q||D>=b.current.x&&G)||N<=Le&&(v<=b.current.y&&m.current==="bottom"||v>=b.current.y&&O))return;let Q=0,V=0;const xe=Math.abs(D)>Math.abs(v);Q=xe?n==="nesw-resize"?-v:v:D,V=xe?v:n==="nesw-resize"?-D:D,p.x=I[q?1:0],p.y=I[O?2:3],i.forEach(C=>{const Se=Math.abs(C.x-p.x)/k,Ge=Math.abs(C.x+C.width-p.x)/k,Te=Math.abs(C.y-p.y)/N,Ue=Math.abs(C.y+C.height-p.y)/N;C.x+=(Q-b.current.x)*Se,C.y+=(V-b.current.y)*Te,C.width+=(Q-b.current.x)*(Ge-Se),C.height+=(V-b.current.y)*(Ue-Te)}),b.current={x:Q,y:V}},Fe=(i,l,c)=>{i.length===1?Xe(i[0],l-x.current.x,c-x.current.y):Ye(i,l,c)},We=(i,l,c)=>{i.forEach(f=>{f.x+=l,f.y+=c})},ae=({x:i,y:l},c)=>{bt({x:i,y:l},f=>{if(f.trim()){const h=Pe(f);let p=0;h.forEach(v=>{if(e.current){const{width:I}=e.current.measureText(v);I>p&&(p=I)}});const D=fe();u.addDrawData({type:"text",id:D,x:i,y:l,content:f,width:Math.floor(p),height:h.length*re,isSelected:!1}),u.addOperateStack({type:"ADD",selectedIds:D}),u.storageDrawData(),_()}},c)},J=w.exports.useRef();J.current=(i,l)=>{if(r==="selection"){const c=Lt({x:i,y:l});u.data.forEach(f=>f.isSelected=!1),c?(u.data=u.data.filter(f=>f.id!==c.id),ae({x:c.x,y:c.y},c.content)):ae({x:i,y:l}),_()}},w.exports.useEffect(()=>{const i=({pageX:l,pageY:c})=>{var f;(f=J.current)==null||f.call(J,l,c)};return document.addEventListener("dblclick",i),()=>document.removeEventListener("dblclick",i)},[]),w.exports.useEffect(()=>{s(r==="selection"?E.default:E.crosshair),r!=="selection"&&u.data.forEach(i=>i.isSelected=!1)},[r]),ke((i,l)=>{l&&i==="z"&&(u.revokeDrawData(),_()),l&&i==="a"&&(u.data.forEach(c=>c.isSelected=!0),u.data.length>1&&(y.current=!0),u.storageDrawData(),_()),i==="Backspace"&&(u.delete(),_())});const He=()=>{R.current=void 0,d.current=!1,b.current={x:0,y:0},se.current=[]},K=w.exports.useRef();K.current=i=>{if(i.button===2)return;const{pageX:l,pageY:c}=i;if(x.current=L.current={x:l,y:c},r==="text")o("selection"),ae({x:l,y:c});else if(r==="selection"){if(a.current=!0,y.current&&_e(l,c)){g.current=!0;return}const f=Oe({x:l,y:c});if(f){m.current=f[1],g.current=!0;const p=u.data.filter(D=>D.isSelected);if(se.current=p.map(D=>F({},D)),p.length===1&&p[0].type==="arrow"){const D=p[0];T.current=D.height<=0&&m.current==="top"||D.height>0&&m.current==="bottom"?"head":"foot"}return}const h=ye({x:l,y:c});u.data.forEach(p=>p.isSelected=!1),g.current=!1,h?(u.data.find(p=>p.id===h).isSelected=!0,g.current=!0,u.storageDrawData()):(u.addDrawData({type:r,id:fe(),x:l,y:c,width:0,height:0,isSelected:!1}),_())}else a.current=!0,u.addDrawData({type:r,id:fe(),x:l,y:c,width:0,height:0,isSelected:!1})};const Z=w.exports.useRef();Z.current=i=>{const{pageX:l,pageY:c}=i;if(!a.current){const p=Oe({x:l,y:c});if(p){s(p[0]);return}if(r==="selection"){const D=y.current?_e(l,c):ye({x:l,y:c});s(D?E.move:E.default)}return}const f=l-x.current.x,h=c-x.current.y;if(r==="selection"&&g.current){const p=u.data.filter(v=>v.isSelected),D=["nesw-resize","nwse-resize"].includes(n);D?Fe(p,l,c):We(p,f,h),(l!==x.current.x||c!==x.current.y)&&(R.current=D?"resize":"move",x.current={x:l,y:c})}else{const p=u.data[u.data.length-1];if(p.type!=="text"&&(p.width=f,p.height=h),p.type==="selection"){d.current=!0;const D=Mt(x.current.x,x.current.y,f,h);y.current=D.length>1,u.data.forEach(v=>{v.isSelected=D.includes(v.id)})}}_()};const $=w.exports.useRef();$.current=i=>{if(!a.current)return;a.current=!1;const{pageX:l,pageY:c}=i;if(l===x.current.x&&c===x.current.y)r!=="selection"&&u.popDrawData(),R.current?R.current==="move"?u.addOperateStack({type:"MOVE",selectedIds:u.data.filter(f=>f.isSelected).map(f=>f.id),payload:{x:l-L.current.x,y:c-L.current.y}}):u.addOperateStack({type:"RESIZE",payload:se.current}):y.current=!1;else{if(r!=="selection"){const f=u.data[u.data.length-1];f.isSelected=!0,u.addOperateStack({type:"ADD",selectedIds:f.id}),o("selection")}else u.popDrawData();_()}if(r==="selection"&&!R.current&&!d.current){u.data.forEach(h=>h.isSelected=!1);const f=ye({x:l,y:c});f?u.data.find(h=>h.id===f).isSelected=!0:s(E.default),_()}He(),u.storageDrawData()},w.exports.useEffect(()=>{const i=f=>{var h;(h=Z.current)==null||h.call(Z,f)},l=f=>{var h;(h=K.current)==null||h.call(K,f)},c=f=>{var h;(h=$.current)==null||h.call($,f)};return document.addEventListener("mousedown",l),document.addEventListener("mousemove",i),document.addEventListener("mouseup",c),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",c)}},[])},Ft=()=>{const{drawType:e,setDrawType:t}=w.exports.useContext(me);ke(g=>{const d=+g-1;!isNaN(d)&&d!==-1&&d<he.length&&t(he[d].type)});const r=(g,d)=>M("div",{className:Y["tool-item"],onClick:d,children:M(g,F({},Ie))}),o=()=>{A.emit("clear")},n=()=>{A.emit("import")},s=()=>{A.emit("exportData")},a=()=>{A.emit("exportImage")};return te(nt,{children:[M("div",{className:de(Y.container,Y.element),children:he.map(({Icon:g,type:d},y)=>M(Pt,{isActive:d===e,Icon:M(g,F({},Ie)),index:y+1,changeType:()=>t(d)},y))}),te("div",{className:de(Y.container,Y.operate),children:[r(it,o),r(ot,n),r(st,s),r(at,a)]})]})};function Wt(){const e=w.exports.useRef(null),t=w.exports.useRef(null),{cursorType:r}=w.exports.useContext(De);return w.exports.useEffect(()=>{e.current&&(t.current=e.current.getContext("2d"))},[]),Yt(t),Nt(e,t),te("div",{className:"App",style:{position:"relative",cursor:r},children:[M(Ft,{}),M("canvas",{ref:e,id:"canvas"})]})}ct.render(M(lt.StrictMode,{children:M(kt,{children:M(Xt,{children:M(Wt,{})})})}),document.getElementById("root"));
